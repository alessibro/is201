<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Star Wars Trivia Challenge</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Roboto:wght@300;400;700&display=swap');

        body {
            font-family: 'Roboto', sans-serif;
            background-color: #000;
            color: #ffe81f; /* Star Wars Yellow */
            overflow-x: hidden;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        footer {
            position: relative;
            top: 10px;
            bottom: 10px;
        }

        /* Starry Background Animation */
        .stars, .twinkling {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            width: 100%;
            height: 100%;
            display: block;
        }

        .stars {
            background: #000 url('http://www.script-tutorials.com/demos/360/images/stars.png') repeat top center;
            z-index: -2;
        }

        .twinkling {
            background: transparent url('http://www.script-tutorials.com/demos/360/images/twinkling.png') repeat top center;
            z-index: -1;
            animation: move-twink-back 200s linear infinite;
        }

        @keyframes move-twink-back {
            from {background-position:0 0;}
            to {background-position:-10000px 5000px;}
        }

        h1, h2, h3, .btn-text {
            font-family: 'Orbitron', sans-serif;
            text-shadow: 0 0 10px rgba(255, 232, 31, 0.5);
        }

        .card {
            background: rgba(20, 20, 20, 0.9);
            border: 2px solid #ffe81f;
            box-shadow: 0 0 20px rgba(255, 232, 31, 0.2);
            backdrop-filter: blur(5px);
        }

        .choice-btn {
            transition: all 0.3s ease;
            border: 1px solid #444;
            background: rgba(255, 255, 255, 0.05);
            text-align: left;
        }

        .choice-btn:hover:not(:disabled) {
            background: rgba(255, 232, 31, 0.2);
            border-color: #ffe81f;
            transform: translateX(10px);
        }

        .choice-btn.correct {
            background-color: rgba(40, 167, 69, 0.8) !important;
            border-color: #28a745 !important;
            color: white;
        }

        .choice-btn.incorrect {
            background-color: rgba(220, 53, 69, 0.8) !important;
            border-color: #dc3545 !important;
            color: white;
        }

        /* Saber Loading Bar */
        .saber-container {
            width: 100%;
            height: 10px;
            background-color: #333;
            border-radius: 5px;
            overflow: hidden;
            margin-bottom: 20px;
            box-shadow: 0 0 5px #000 inset;
        }

        .saber-fill {
            height: 100%;
            background: #ffe81f; /* Default saber color */
            box-shadow: 0 0 10px #ffe81f;
            transition: width 0.5s ease-in-out;
            width: 0%;
        }
        
        /* Utility */
        .hidden { display: none !important; }
        
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .homebutton{
            position: fixed;
            left: 10px;
            top: 10px;
            margin-top: 10px;
            margin-left: 10px;
            color: white;
            text-decoration: underline;
            padding: 2px;
            border: 2px solid #ffe81f;
            border-radius: 10px;
        }

    </style>
</head>
<body class="flex items-center justify-center p-4">

    <div class="homebutton">
        <a href="index.html">HOME</a>
        <br>
        <a href="scratch.html">SCRATCH</a>
    </div>

    <!-- Backgrounds -->
    <div class="stars"></div>
    <div class="twinkling"></div>

    <div class="w-full max-w-2xl mx-auto z-10">
        
        <!-- Header -->
        <header class="text-center mb-8">
            <h1 class="text-4xl md:text-6xl font-bold mb-2 tracking-widest text-yellow-400">STAR WARS</h1>
            <h2 class="text-xl md:text-2xl tracking-wider text-gray-300">TRIVIA CHALLENGE</h2>
        </header>

        <!-- Start Screen -->
        <div id="start-screen" class="card rounded-xl p-8 text-center fade-in">
            <p class="text-lg mb-8 text-gray-300">Test your knowledge of the Force, the Empire, and the galaxy far, far away.</p>
            <div class="space-y-4">
                <button onclick="startGame()" class="px-8 py-4 bg-yellow-400 text-black font-bold rounded-lg text-xl hover:bg-yellow-300 hover:scale-105 transition transform shadow-lg btn-text">
                    START GAME
                </button>
            </div>
            <p class="mt-6 text-sm text-gray-500">May the Force be with you.</p>
        </div>

        <!-- Game Screen -->
        <div id="game-screen" class="card rounded-xl p-6 md:p-8 hidden fade-in">
            
            <!-- Progress Bar -->
            <div class="flex justify-between text-sm text-gray-400 mb-2 font-mono">
                <span id="question-counter">Question 1/5</span>
                <span id="score-display">Score: 0</span>
            </div>
            <div class="saber-container">
                <div id="progress-bar" class="saber-fill"></div>
            </div>

            <!-- Question -->
            <div class="mb-8 min-h-[100px] flex items-center justify-center">
                <h3 id="question-text" class="text-xl md:text-2xl font-bold text-center leading-relaxed">
                    <!-- Question goes here -->
                </h3>
            </div>

            <!-- Choices -->
            <div id="choices-container" class="grid gap-4">
                <!-- Buttons generated by JS -->
            </div>

            <!-- Feedback / Next Button Area -->
            <div id="feedback-area" class="mt-8 text-center hidden">
                <p id="feedback-text" class="text-xl font-bold mb-4"></p>
                <button id="next-btn" onclick="nextQuestion()" class="px-6 py-2 bg-blue-600 text-white rounded font-bold hover:bg-blue-500 transition shadow-lg btn-text">
                    NEXT QUESTION
                </button>
            </div>
        </div>

        <!-- Result Screen -->
        <div id="result-screen" class="card rounded-xl p-8 text-center hidden fade-in">
            <h2 class="text-3xl font-bold mb-4 text-yellow-400">TRAINING COMPLETE</h2>
            
            <div class="my-8">
                <p class="text-gray-300 text-lg mb-2">Final Score</p>
                <div class="text-6xl font-bold text-white mb-2" id="final-score">0</div>
                <p class="text-xl text-yellow-400" id="final-rank">Padawan</p>
            </div>

            <p id="result-message" class="text-gray-300 mb-8 italic">
                <!-- Dynamic message -->
            </p>

            <button onclick="startGame()" class="px-8 py-3 bg-yellow-400 text-black font-bold rounded-lg text-lg hover:bg-yellow-300 hover:scale-105 transition transform shadow-lg btn-text">
                PLAY AGAIN
            </button>
        </div>

    </div>

    <script>
        // Trivia Data
        const allQuestions = [
            // Original Questions
            {
                question: "What is the name of Han Solo's ship?",
                choices: ["Enterprise", "Millennium Falcon", "X-Wing", "Slave I"],
                correct: 1
            },
            {
                question: "Who is Luke Skywalker's father?",
                choices: ["Obi-Wan Kenobi", "Palpatine", "Darth Vader", "Yoda"],
                correct: 2
            },
            {
                question: "What planet is Chewbacca from?",
                choices: ["Kashyyyk", "Endor", "Hoth", "Tatooine"],
                correct: 0
            },
            {
                question: "Which bounty hunter captured Han Solo in 'The Empire Strikes Back'?",
                choices: ["Jango Fett", "Bossk", "IG-88", "Boba Fett"],
                correct: 3
            },
            {
                question: "What color is Mace Windu's lightsaber?",
                choices: ["Blue", "Green", "Purple", "Red"],
                correct: 2
            },
            {
                question: "Who killed Jabba the Hutt?",
                choices: ["Luke Skywalker", "Han Solo", "Princess Leia", "Lando Calrissian"],
                correct: 2
            },
            {
                question: "What is the name of the toy Yoda steals from Luke in 'The Empire Strikes Back'?",
                choices: ["A lamp", "A datapad", "A compass", "A flute"],
                correct: 0 
            },
            {
                question: "Which Order brought about the death of the Jedi?",
                choices: ["Order 55", "Order 66", "Order 77", "Order 99"],
                correct: 1
            },
            {
                question: "What is the name of Boba Fett's ship?",
                choices: ["Slave I", "Razor Crest", "Ghost", "Falcon"],
                correct: 0
            },
            {
                question: "Who built C-3PO?",
                choices: ["Anakin Skywalker", "Obi-Wan Kenobi", "Luke Skywalker", "PadmÃ© Amidala"],
                correct: 0
            },
            {
                question: "Which Sith Lord uses a double-bladed lightsaber?",
                choices: ["Count Dooku", "Darth Vader", "Darth Maul", "Darth Sidious"],
                correct: 2
            },
            {
                question: "What species is Admiral Ackbar?",
                choices: ["Mon Calamari", "Twi'lek", "Rodian", "Gungan"],
                correct: 0
            },
            {
                question: "Who is the Supreme Leader of the First Order in 'The Force Awakens'?",
                choices: ["Kylo Ren", "Snoke", "Hux", "Phasma"],
                correct: 1
            },
            {
                question: "What is the name of the planet where the clones were created?",
                choices: ["Naboo", "Coruscant", "Kamino", "Geonosis"],
                correct: 2
            },
            
            // Added Questions (Expanded Bank - Batch 1)
            {
                question: "What color is Yoda's skin?",
                choices: ["Blue", "Green", "Brown", "Gray"],
                correct: 1
            },
            {
                question: "In which movie does Obi-Wan Kenobi famously say, 'Hello there'?",
                choices: ["A New Hope", "Revenge of the Sith", "The Phantom Menace", "Attack of the Clones"],
                correct: 1
            },
            {
                question: "What planet is home to the Gungans and the Naboo?",
                choices: ["Tatooine", "Alderaan", "Naboo", "Coruscant"],
                correct: 2
            },
            {
                question: "What is the primary function of an Astromech Droid like R2-D2?",
                choices: ["Navigation and maintenance", "Battle analysis", "Protocol translation", "Astrogation calculations"],
                correct: 0
            },
            {
                question: "Which character is known as 'The Child' or 'Baby Yoda'?",
                choices: ["Grogu", "Ahsoka Tano", "Din Djarin", "Peli Motto"],
                correct: 0
            },
            {
                question: "Who was Darth Vader's apprentice before he turned to the dark side?",
                choices: ["Starkiller", "Ahsoka Tano", "Barriss Offee", "Ezra Bridger"],
                correct: 1
            },
            {
                question: "What is the name of Lando Calrissian's mining colony in 'The Empire Strikes Back'?",
                choices: ["Bespin", "Cloud City", "Corellia", "Kessel"],
                correct: 1
            },
            {
                question: "What power source does a lightsaber use?",
                choices: ["Kyber crystal", "Fusion generator", "Force lightning", "Krayt Dragon Pearl"],
                correct: 0
            },
            {
                question: "What year was the original Star Wars movie, 'A New Hope', released?",
                choices: ["1977", "1980", "1983", "1999"],
                correct: 0
            },
            {
                question: "What type of trooper wears orange shoulder pads on Tatooine?",
                choices: ["Stormtrooper", "Shoretrooper", "Sandtrooper", "Death Trooper"],
                correct: 2
            },
            {
                question: "What is the Wookiee life debt concept called?",
                choices: ["Shyyyo-day", "Kashyyyk vow", "Honor bond", "Karma"],
                correct: 0
            },
            {
                question: "In 'Return of the Jedi', what is the designation of the second Death Star?",
                choices: ["DS-1", "DS-2", "DS-9", "DS-Beta"],
                correct: 1
            },
            {
                question: "What is the name of the smuggler who helps Rey and Finn escape in 'The Force Awakens'?",
                choices: ["Maz Kanata", "Poe Dameron", "Unkar Plutt", "BB-8"],
                correct: 0
            },

            // Added Questions (Expanded Bank - Batch 2)
            {
                question: "Who was Obi-Wan Kenobi's Jedi Master?",
                choices: ["Yoda", "Mace Windu", "Qui-Gon Jinn", "Plo Koon"],
                correct: 2
            },
            {
                question: "What is the name of Darth Sidious' alter ego?",
                choices: ["Sheev Palpatine", "Sifo-Dias", "Snoke", "Darth Tyranus"],
                correct: 0
            },
            {
                question: "What is the primary language spoken by the Hutts?",
                choices: ["Galactic Basic", "Sy Bisti", "Huttese", "Mando'a"],
                correct: 2
            },
            {
                question: "What creature lives in the Great Pit of Carkoon, where the Sarlacc is found?",
                choices: ["Krayt Dragon", "Rancor", "Sarlacc", "Wampa"],
                correct: 2
            },
            {
                question: "What is the title of the first movie in the prequel trilogy?",
                choices: ["Attack of the Clones", "Revenge of the Sith", "The Phantom Menace", "A New Hope"],
                correct: 2
            },
            {
                question: "What is the name of the ice planet where the Rebel base is located in 'The Empire Strikes Back'?",
                choices: ["Dagobah", "Hoth", "Bespin", "Endor"],
                correct: 1
            },
            {
                question: "What is Finn's original Stormtrooper designation number?",
                choices: ["TR-8R", "CT-5555", "FN-2187", "TK-421"],
                correct: 2
            },
            {
                question: "In which film does the quote 'I have a bad feeling about this' first appear in the main saga?",
                choices: ["The Phantom Menace", "A New Hope", "The Empire Strikes Back", "Return of the Jedi"],
                correct: 1
            },
            {
                question: "What type of vessel is the *Executor*, Darth Vader's personal flagship?",
                choices: ["Star Destroyer", "Super Star Destroyer", "Dreadnaught", "Frigate"],
                correct: 1
            },
            {
                question: "What is the Sith opposite of a Kyber crystal?",
                choices: ["A Krayt Crystal", "A Dark Crystal", "A Rubat Crystal", "A Sith Crystal"],
                correct: 0
            }
        ];

        let currentQuestions = [];
        let currentQuestionIndex = 0;
        let score = 0;
        const totalQuestions = 5; // Quiz limited to 5 questions

        // DOM Elements
        const startScreen = document.getElementById('start-screen');
        const gameScreen = document.getElementById('game-screen');
        const resultScreen = document.getElementById('result-screen');
        
        const questionCounterEl = document.getElementById('question-counter');
        const scoreDisplayEl = document.getElementById('score-display');
        const progressBar = document.getElementById('progress-bar');
        const questionTextEl = document.getElementById('question-text');
        const choicesContainer = document.getElementById('choices-container');
        const feedbackArea = document.getElementById('feedback-area');
        const feedbackText = document.getElementById('feedback-text');
        const nextBtn = document.getElementById('next-btn'); // New element reference
        
        const finalScoreEl = document.getElementById('final-score');
        const finalRankEl = document.getElementById('final-rank');
        const resultMessageEl = document.getElementById('result-message');

        // Shuffle Array Helper
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function startGame() {
            // Reset State
            score = 0;
            currentQuestionIndex = 0;
            
            // Get random selection of questions from the expanded bank
            currentQuestions = shuffleArray([...allQuestions]).slice(0, totalQuestions);

            // Reset Next Button Text
            nextBtn.innerText = "NEXT QUESTION";

            // UI Transitions
            startScreen.classList.add('hidden');
            resultScreen.classList.add('hidden');
            gameScreen.classList.remove('hidden');

            loadQuestion();
        }

        function loadQuestion() {
            const questionData = currentQuestions[currentQuestionIndex];
            
            // Update UI Counters
            questionCounterEl.innerText = `Question ${currentQuestionIndex + 1}/${totalQuestions}`;
            scoreDisplayEl.innerText = `Score: ${score}`;
            
            // Update Progress Bar
            const progress = ((currentQuestionIndex) / totalQuestions) * 100;
            progressBar.style.width = `${progress}%`;
            

            // Clear previous state
            choicesContainer.innerHTML = '';
            feedbackArea.classList.add('hidden');
            
            // Set Question Text
            questionTextEl.innerHTML = questionData.question;

            // Generate Buttons
            questionData.choices.forEach((choice, index) => {
                const btn = document.createElement('button');
                btn.className = 'choice-btn w-full p-4 rounded text-gray-200 font-medium text-lg flex items-center';
                btn.innerHTML = `<span class="bg-gray-700 w-8 h-8 rounded-full flex items-center justify-center mr-4 text-xs font-bold">${String.fromCharCode(65 + index)}</span> ${choice}`;
                btn.onclick = () => checkAnswer(index, btn);
                choicesContainer.appendChild(btn);
            });
        }

        function checkAnswer(selectedIndex, selectedBtn) {
            const questionData = currentQuestions[currentQuestionIndex];
            const buttons = choicesContainer.querySelectorAll('button');

            // Disable all buttons
            buttons.forEach(btn => btn.disabled = true);

            if (selectedIndex === questionData.correct) {
                // Correct
                selectedBtn.classList.add('correct');
                score++;
                scoreDisplayEl.innerText = `Score: ${score}`;
                feedbackText.innerText = "Correct! The Force is strong with you.";
                feedbackText.className = "text-xl font-bold mb-4 text-green-400";
                
            } else {
                // Incorrect
                selectedBtn.classList.add('incorrect');
                // Highlight correct answer
                buttons[questionData.correct].classList.add('correct');
                feedbackText.innerText = "Incorrect.";
                feedbackText.className = "text-xl font-bold mb-4 text-red-500";
            }
            
            // --- NEW LOGIC: Change button text for the final question ---
            if (currentQuestionIndex === totalQuestions - 1) {
                nextBtn.innerText = "VIEW SCORE";
            }
            // --- END NEW LOGIC ---

            feedbackArea.classList.remove('hidden');
            feedbackArea.classList.add('fade-in');
            
            // Update progress bar to next step
            const progress = ((currentQuestionIndex + 1) / totalQuestions) * 100;
            progressBar.style.width = `${progress}%`;
        }

        function nextQuestion() {
            currentQuestionIndex++;
            if (currentQuestionIndex < totalQuestions) {
                loadQuestion();
            } else {
                endGame();
            }
        }

        function endGame() {
            gameScreen.classList.add('hidden');
            resultScreen.classList.remove('hidden');

            finalScoreEl.innerText = `${score} / ${totalQuestions}`;

            let rank = "";
            let message = "";

            const percentage = (score / totalQuestions) * 100;

            if (percentage === 100) {
                rank = "Jedi Master";
                message = "Incredible! You know the archives better than Jocasta Nu.";
            } else if (percentage >= 80) { // 4/5
                rank = "Jedi Knight";
                message = "Great job! You are ready to face the trials.";
            } else if (percentage >= 40) { // 2/5
                rank = "Padawan";
                message = "Not bad, young one. But you still have much to learn.";
            } else {
                rank = "Youngling";
                message = "Search your feelings... and study the movies again!";
            }

            finalRankEl.innerText = rank;
            resultMessageEl.innerText = message;
        }
        
        function playSound(type) {
            // Placeholder for sound effects if desired
        }

    </script>
</body>
<!-- <footer>
    <h6 class="text-gray-300"><a href="index.html">RETURN HOME</a></h6>
</footer> -->
</html>